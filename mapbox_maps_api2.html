<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="UTF-8">
    <title>Mapbox Exercise Practice</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

    <script src='https://api.mapbox.com/mapbox-gl-js/v2.6.1/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v2.6.1/mapbox-gl.css' rel='stylesheet' />
    <!-- Mapbox CSS -->
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.css' rel='stylesheet' />

<!--    <style>-->
<!--        #map {-->
<!--            display: flex;-->
<!--            align-content: center;-->
<!--        }-->
<!--    </style>-->

</head>
<body style="background-color: lightgrey; margin-top: 2em">

<h1 align="center">My Favorite Restaurants in San Antonio!</h1>

<style>
    #marker {
        background-image: url('https://docs.mapbox.com/mapbox-gl-js/assets/washington-monument.jpg');
        background-size: cover;
        width: 50px;
        height: 50px;
        border-radius: 50%;
        cursor: pointer;
    }

    .mapboxgl-popup {
        max-width: 200px;
    }
</style>

<!-- The HTML element that serves as the Mapbox container -->
<br><br>
<!--<h4>RockSan Thai Restaurant & Sushi</h4>-->
<div align="center">
<div id='map' style='width: 800px; height: 400px;'></div>
</div>
<br><br>
<h3 id="info"></h3>
<!--<h4>Chama Gaucha</h4>-->
<!--<div id='map2' style='width: 300px; height: 200px;'></div>-->
<!--<div id='map'></div>-->

<!-- Mapbox JS -->
<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.js'></script>

<!-- Mapbox Geocoder Util Methods -->
<script src="js/mapbox-geocoder-utils.js"></script>


<script src="js/keys.js"></script>
<!-- Custom JS -->
<script>
    mapboxgl.accessToken = MAPBOX_KEY;
    var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/streets-v9',
        zoom: 10,
        center: [-98.4916, 29.4252]
    });

    // the geocode method from mapbox-geocoder-utils.js
    geocode("151 W Bitters Rd, San Antonio, TX 78216", MAPBOX_KEY).then(function(result) {
        console.log(result);
        map.setCenter(result);
        map.setZoom(10);
    });

    var rockSan = new mapboxgl.Marker({
        color: "blue",
    }).setLngLat([-98.58876, 29.56378]).setDraggable(true)

    rockSan.addTo(map)


    var popup = new mapboxgl.Popup()

        .setLngLat(rockSan.getLngLat())
        .setHTML('<h7 style="color: grey">RockSan Thai Restaurant & Sushi</h7>')
        //.setHTML('<img src="img/cat_caviar.jpg">')
        .addTo(map);

    rockSan.on('dragend',function(){
        console.log(rockSan.getLngLat());
        popup.setLngLat(rockSan.getLngLat())
        $("#info").html('Current Location: ' + rockSan.getLngLat())
    })

    // create the popup
    // const popup = new mapboxgl.Popup({ offset: 25 }).setText(
    //     'Construction on the Washington Monument began in 1848.'
    // );
    //
    // // create DOM element for the marker
    // const el = document.createElement('div');
    // el.id = 'marker';
    //
    // // create the marker
    // new mapboxgl.Marker(el)
    //     .setLngLat(monument)
    //     .setPopup(popup) // sets a popup on this marker
    //     .addTo(map);

    var chamaGaucha = new mapboxgl.Marker({
        color: "blue",
    }).setLngLat([-98.497737, 29.61026]).setDraggable(true)

    chamaGaucha.addTo(map)

    var trilogyPizza = new mapboxgl.Marker({
        color: "blue",
    }).setLngLat([-98.495918, 29.624718]).setDraggable(true)

    trilogyPizza.addTo(map)

    var burgerBoy = new mapboxgl.Marker({
        color: "blue",
    }).setLngLat([-98.483659, 29.566207]).setDraggable(true)

    burgerBoy.addTo(map)

    var pluckers = new mapboxgl.Marker({
        color: "blue",
    }).setLngLat([-98.58255, 29.5913]).setDraggable(true)

    pluckers.addTo(map)

    var wingDaddies = new mapboxgl.Marker({
        color: "blue",
    }).setLngLat([-98.527163, 29.515352]).setDraggable(true)

    wingDaddies.addTo(map)

    var dhalia = new mapboxgl.Marker({
        color: "blue",
    }).setLngLat([-98.497737, 29.61026]).setDraggable(true)

    dhalia.addTo(map)

    var ginzaRamen = new mapboxgl.Marker({
        color: "blue",
    }).setLngLat([-98.325397, 29.57583]).setDraggable(true)

    ginzaRamen.addTo(map)

    // mapboxgl.accessToken = MAPBOX_KEY;
    // var map2 = new mapboxgl.Map({
    //     container: 'map2',
    //     style: 'mapbox://styles/mapbox/streets-v9',
    //     zoom: 10,
    //     center: [-98.4916, 29.4252]
    // });

    // the geocode method from mapbox-geocoder-utils.js
    // geocode("15069 Interstate 35 #217, Selma, TX 78154", MAPBOX_KEY).then(function(result) {
    //     console.log(result);
    //     map2.setCenter(result);
    //     map2.setZoom(17);
    // });

</script>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
</body>
</html>